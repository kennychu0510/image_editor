(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();function g(t){const e=document.querySelector(t);if(!e)throw"Element not found for "+t;return e}const c=g("#img-original"),y=g("#after-container"),L=g("#color-value"),C=g("#main-color input"),S=g("#secondary-color input"),b=g("#tertiary-color input"),N=g("#remove-selected-color-btn"),T=g("#image-upload");let l=c.naturalWidth,u=c.naturalHeight;const d=document.createElement("canvas"),O=d.getContext("2d");d.width=l;d.height=u;O.drawImage(c,0,0,l,u);let f=O.getImageData(0,0,l,u),r=f.data,R={};for(let t=0;t<r.length;t+=4){const e=[r[t],r[t+1],r[t+2],r[t+3]];let o=JSON.stringify(e);R[o]?R[o]++:R[o]=1}let h=Object.entries(R);h=h.sort((t,e)=>t[1]<e[1]?1:-1);const p=h.slice(0,3),_=JSON.parse(p[0][0]),A=JSON.parse(p[1][0]),I=JSON.parse(p[2][0]),D={r:_[0],g:_[1],b:_[2]},G={r:A[0],g:A[1],b:A[2]},v={r:I[0],g:I[1],b:I[2]};C.value=m(D);S.value=m(G);b.value=m(v);O.putImageData(f,0,0);y.prepend(d);c.addEventListener("click",t=>{const e=t.x,o=t.y,a=c.getBoundingClientRect();let n=Math.round(e-a.x);const s=Math.round(o-a.y)*4*l+n*4,E={r:r[s],g:r[s+1],b:r[s+2],a:r[s+3]};L.dataset.rgba=JSON.stringify([r[s],r[s+1],r[s+2],r[s+3]]),L.value=m(E)});function m(t){const{r:e,g:o,b:a}=t;let n=e.toString(16),i=o.toString(16),s=a.toString(16);return n.length==1&&(n="0"+e),i.length==1&&(i="0"+o),s.length==1&&(s="0"+a),"#"+n+i+s}N.addEventListener("click",()=>{const t=L.dataset.rgba;for(let e=0;e<r.length;e+=4){const o=[r[e],r[e+1],r[e+2],r[e+3]];JSON.stringify(o)===t&&(r[e+3]=0)}O.putImageData(f,0,0)});T.addEventListener("change",t=>{const e=URL.createObjectURL(t.target.files[0]),o=new Image;o.src=e,o.onload=()=>{c.src=e,l=c.width,u=c.height,B(O,o)}});function B(t,e){d.width=l,d.height=u,t.drawImage(e,0,0,l,u),f=t.getImageData(0,0,l,u),r=f.data}
